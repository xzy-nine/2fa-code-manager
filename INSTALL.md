# 安装指南

## 📥 安装方式

### 方式一：开发版安装（推荐开发者）

1. **下载源码**
   ```bash
   git clone https://github.com/your-username/2fa-code-manager.git
   cd 2fa-code-manager
   ```

2. **安装依赖（可选）**
   ```bash
   npm install
   ```

3. **验证安装**
   ```bash
   npm run validate
   npm test
   ```

4. **在浏览器中加载**
   - 打开 Chrome 浏览器
   - 地址栏输入：`chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录文件夹
   - 扩展安装完成！

### 方式二：发布版安装

1. **下载发布包**
   - 从 [Releases](https://github.com/your-username/2fa-code-manager/releases) 页面下载最新版本的 ZIP 文件

2. **解压文件**
   - 将下载的 ZIP 文件解压到任意目录

3. **加载到浏览器**
   - 打开 Chrome 浏览器
   - 地址栏输入：`chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择解压后的文件夹

### 方式三：商店安装（即将推出）

从 Chrome Web Store 直接安装（开发中）

## ⚙️ 首次配置

### 1. 基本设置

安装完成后，点击扩展图标进行首次配置：

1. **切换到"设置"标签页**
2. **配置WebDAV服务器（可选）**
   ```
   服务器地址: https://your-webdav-server.com
   用户名: your-username
   密码: your-password
   ```
3. **设置加密密钥（可选）**
   - 留空使用默认简单加密
   - 输入强密码提供更高安全性
4. **启用功能选项**
   - ✅ 启用生物识别验证
   - ✅ 允许本地存储验证码
5. **点击"保存设置"**

### 2. 测试连接

配置WebDAV后，点击"测试连接"确保设置正确。

### 3. 导入首个2FA配置

#### 方法A：扫描二维码
1. 切换到"扫描"标签页
2. 选择"摄像头扫描"或"屏幕识别"
3. 扫描2FA设置页面的二维码
4. 输入配置名称并保存

#### 方法B：手动添加（开发中）
1. 在设置中手动输入配置信息
2. 填写账户名、发行方、密钥等
3. 保存配置

## 🖱️ 基本使用

### 填充验证码
1. **选择输入框**：在需要2FA验证的网页上点击验证码输入框
2. **打开扩展**：点击浏览器工具栏的扩展图标
3. **身份验证**：如果启用了生物识别，完成身份验证
4. **填充验证码**：
   - 点击"快速填充"（如果已保存配置）
   - 或点击"填充验证码"选择配置

### 查看本地验证码
1. **切换标签页**：点击"本地"标签页
2. **身份验证**：完成身份验证
3. **查看验证码**：查看实时验证码和剩余时间
4. **复制验证码**：点击验证码复制到剪贴板

### 扫描新的二维码
1. **切换标签页**：点击"扫描"标签页
2. **选择扫描方式**：
   - 摄像头扫描：使用摄像头实时扫描
   - 屏幕识别：识别当前页面的二维码
3. **保存配置**：输入名称并保存

## 🔧 系统要求

### 浏览器支持
- ✅ Google Chrome 88+
- ✅ Microsoft Edge 88+
- ⚠️ Firefox（部分功能）
- ⚠️ Safari（部分功能）

### 操作系统
- ✅ Windows 10/11（完整功能）
- ✅ macOS 10.15+（部分生物识别功能）
- ✅ Linux（基础功能）

### 硬件要求
- **摄像头**：用于二维码扫描（可选）
- **生物识别设备**：Windows Hello、Touch ID等（可选）
- **网络连接**：用于WebDAV同步（可选）

## 🛠️ 故障排除

### 常见问题

**Q: 扩展无法加载？**
```
解决方案：
1. 确认Chrome版本 ≥ 88
2. 检查开发者模式是否开启
3. 查看控制台错误信息
4. 重新下载完整的源码包
```

**Q: 无法识别输入框？**
```
解决方案：
1. 手动点击目标输入框
2. 检查输入框是否为标准HTML input元素
3. 刷新页面重试
4. 查看控制台是否有错误
```

**Q: WebDAV连接失败？**
```
解决方案：
1. 确认服务器地址格式正确（https://example.com）
2. 检查用户名密码是否正确
3. 确认服务器支持WebDAV协议
4. 检查网络连接
5. 查看是否有防火墙阻止
```

**Q: 生物识别不可用？**
```
解决方案：
1. 确认浏览器支持WebAuthn API
2. 检查操作系统是否支持生物识别
3. 确认已设置Windows Hello或Touch ID
4. 尝试重新启动浏览器
```

**Q: 验证码不正确？**
```
解决方案：
1. 检查系统时间是否准确
2. 确认密钥配置正确
3. 检查时区设置
4. 重新扫描二维码配置
```

### 调试模式

如果遇到问题，可以开启调试模式：

1. **打开开发者工具**
   - 按F12或右键→检查
2. **查看Console面板**
   - 查找错误信息和调试日志
3. **检查Network面板**
   - 查看WebDAV请求状态
4. **查看扩展调试**
   - 访问 `chrome://extensions/`
   - 点击扩展的"详细信息"
   - 点击"检查视图：服务工作进程"

### 重置扩展

如果扩展出现异常，可以尝试重置：

1. **清除数据**
   ```javascript
   // 在控制台执行
   chrome.storage.local.clear()
   ```
2. **重新加载扩展**
   - 在 `chrome://extensions/` 中点击刷新按钮
3. **重新配置**
   - 按照首次配置步骤重新设置

## 📞 获取帮助

### 在线资源
- **项目主页**: https://github.com/your-username/2fa-code-manager
- **问题反馈**: https://github.com/your-username/2fa-code-manager/issues
- **文档**: https://github.com/your-username/2fa-code-manager/wiki

### 社区支持
- **讨论区**: GitHub Discussions
- **QQ群**: [群号]
- **微信群**: [二维码]

### 联系开发者
- **邮箱**: developer@example.com
- **GitHub**: @your-username

## 🔄 更新指南

### 自动更新（开发中）
扩展会自动检查更新并提示用户。

### 手动更新
1. 下载最新版本
2. 在 `chrome://extensions/` 中删除旧版本
3. 按照安装步骤安装新版本
4. 重新导入配置（如需要）

### 数据迁移
更新时，扩展会自动迁移用户数据。如果遇到问题：
1. 导出现有配置
2. 重新安装扩展
3. 导入备份的配置

---

**注意事项**:
- 🔒 首次使用建议先在测试环境验证
- 💾 定期备份重要的配置数据
- 🔐 保护好WebDAV访问凭据
- 🕒 确保系统时间准确
